name: dockerize

on:
  release: 
    types: [published] 
#    types: [published, created, edited, prereleased, released] 
#  push:
#    tags:
#      - docker*

jobs:
  deploy:
    name: Build and Push Docker
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout CODE
      uses: actions/checkout@v2
      with:
        path: CODE
        
    - name: Copy Dockerfile
      run: cp CODE/docker/Dockerfile Dockerfile
      
    #https://github.com/marketplace/actions/docker-publish
    #https://www.docker.com/blog/first-docker-github-action-is-here/
    - name: Dockerize
      uses: docker/build-push-action@v1
      with:
       username: ${{ secrets.DOCKER_USERNAME }}
       password: ${{ secrets.DOCKER_PASSWORD }}
       repository: ${{ secrets.DOCKER_REPO }} 
       tag_with_ref: true
       #tags: dockerize

